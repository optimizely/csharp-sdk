---
title: "Configure event dispatcher"
slug: "configure-event-dispatcher-csharp"
hidden: false
createdAt: "2019-09-12T13:43:55.726Z"
updatedAt: "2019-09-12T13:45:58.817Z"
---
The Optimizely SDKs make HTTP requests for every impression or conversion that gets triggered. Each SDK has a built-in **event dispatcher** for handling these events, but we recommend overriding it based on the specifics of your environment.

The C# SDK has an out-of-the-box asynchronous dispatcher. We recommend customizing the event dispatcher you use in production to ensure that you queue and send events in a manner that scales to the volumes handled by your application. Customizing the event dispatcher allows you to take advantage of features like batching, which makes it easier to handle large event volumes efficiently or to implement retry logic when a request fails. You can build your dispatcher from scratch or start with the provided dispatcher.

## Customizing Event Dispatcher

To customize the event dispatcher in the Optimizely SDK, you can initialize the Optimizely client (or manager) with a custom event dispatcher instance. The following code example demonstrates how to achieve this:

```csharp
using OptimizelySDK;
using OptimizelySDK.Event.Dispatcher;

// Create an Optimizely client with a custom event dispatcher
Optimizely OptimizelyClient = new Optimizely(
    datafile: datafile,
    eventDispatcher: new CustomEventDispatcher(new OptimizelySDK.Logger.DefaultLogger())
);
```
## Implementing a Custom Event Dispatcher

To implement a custom event dispatcher in the Optimizely SDK, you need to create a class that implements the `IEventDispatcher` interface and provides the `dispatchEvent` function. This function takes in three arguments: `httpVerb`, `url`, and `params`, which are generated by the internal `EventBuilder` class. The custom event dispatcher should send a `POST` request to the specified `url` using the `params` as the body of the request (make sure to stringify it to JSON) and include the `{content-type: 'application/json'}` header.

Here's how you can create a custom event dispatcher:

```csharp
using System.Net.Http;
using System.Threading.Tasks;
using OptimizelySDK.Event.Dispatcher;

class CustomEventDispatcher : IEventDispatcher
{
    private readonly HttpClient _httpClient = new HttpClient();

    public async Task DispatchEvent(string httpVerb, string url, string params)
    {
        var request = new HttpRequestMessage(HttpMethod.Post, url)
        {
            Content = new StringContent(params, Encoding.UTF8, "application/json")
        };

        HttpResponseMessage response = await _httpClient.SendAsync(request);

        // Handle response if needed
    }
}
```